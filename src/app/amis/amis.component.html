<div class="container" fxLayout fxLayoutAlign="center" fxLayoutGap="50px" fxLayout.lt-md="column"
    fxLayoutGap.lt-md="50px">


    <!-- liste des amis -->
    <div fxFlex="initial" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="40px">
        <h2 fxFlex>Mes amis</h2>


        <!-- filtre-->
        <mat-radio-group fxFlex [(ngModel)]="selectedFilter" name="radioGpFilter" (change)="onRadioChange($event)">
            <mat-radio-button value="valides">uniquement relation validée</mat-radio-button>
            <mat-radio-button value="tous">tous</mat-radio-button>
        </mat-radio-group>


        <div fxFlex>
            <div fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="start none">
                <mat-card class="card" fxFlex *ngFor="let ami of (amis | amiFilter : selectedFilter)"
                    [class.card-selected]="ami === selectedAmi" (click)="onSelect(ami)">

                    <mat-card-header fxLayout fxLayoutGap="10px" fxLayoutAlign="start center">
                        <app-ami-state-icon fxFlex="initial" [amiState]="ami.etat"></app-ami-state-icon>
                        <span fxFlex="grow">{{ami.pseudo}}</span>
                        <app-ami-suivi-icon fxFlex="initial" [suivre]="ami.suivre" [notifier]="ami.notifier"
                            [size]="16">
                        </app-ami-suivi-icon>
                    </mat-card-header>

                </mat-card>
            </div>

        </div>

    </div>


    <div fxFlex="initial" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="20px" *ngIf="selectedAmi">

        <!-- détail d'un ami si relation valide -->
        <ng-container *ngIf="selectedAmi.etatrelation == 'open'; else showrelation">
            <app-ami-detail fxFlex="auto" [amiDetail]="selectedAmi" (eventMessage)="onMessage($event)">
            </app-ami-detail>
        </ng-container>

        <!--détail de la relation si pending ou fermée-->
        <ng-template #showrelation>
            <app-ami-relation fxFlex="auto" [amiDetail]="selectedAmi" (eventMessage)="onMessage($event)"
                (eventUpdateRelation)="onUpdateRelation($event)">
            </app-ami-relation>
        </ng-template>
    </div>

</div>

<app-notification *ngIf="response" [message]="response"></app-notification>